reparatur
===========
A plugin that helps you fix the crash of webview in Android Lollipop.

Download
--------

#### Top-level build file
```groovy
buildscript {
    repositories {
        maven {
            url = uri("https://oss.sonatype.org/content/repositories/snapshots/")
        }
    }
    dependencies {
        classpath "cn.nikeo.reparatur:gradle-plugin:0.1.0-SNAPSHOT"
    }
}
```

#### App build file
```groovy
apply plugin: 'com.android.application'
apply plugin: "cn.nikeo.reparatur"

crashWebViews {
    qualifiedNames = ["cn.nikeo.reparaturapplication.CustomWebView"]
}
```

Fixing
------

#### Before Fixing
```java
public class CustomWebView extends WebView {
    public CustomWebView(@NonNull Context context) {
        super(context);
    }

    public CustomWebView(@NonNull Context context, @Nullable AttributeSet attrs) {
        super(context, attrs);
    }

    public CustomWebView(@NonNull Context context, @Nullable AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
    }

    public CustomWebView(@NonNull Context context, @Nullable AttributeSet attrs, int defStyleAttr, int defStyleRes) {
        super(context, attrs, defStyleAttr, defStyleRes);
    }
}
```
#### After Fixing
```java
public class CustomWebView extends WebView {
    private static Context _autoGeneratedFixMethodByGradlePlugin(Context context) {
        return VERSION.SDK_INT >= 21 && VERSION.SDK_INT < 23 ? context.createConfigurationContext(new Configuration()) : context;
    }

    public CustomWebView(@NonNull Context context) {
        super(_autoGeneratedFixMethodByGradlePlugin(context));
    }

    public CustomWebView(@NonNull Context context, @Nullable AttributeSet attrs) {
        super(_autoGeneratedFixMethodByGradlePlugin(context), attrs);
    }

    public CustomWebView(@NonNull Context context, @Nullable AttributeSet attrs, int defStyleAttr) {
        super(_autoGeneratedFixMethodByGradlePlugin(context), attrs, defStyleAttr);
    }

    public CustomWebView(@NonNull Context context, @Nullable AttributeSet attrs, int defStyleAttr, int defStyleRes) {
        super(_autoGeneratedFixMethodByGradlePlugin(context), attrs, defStyleAttr, defStyleRes);
    }
}

```

License
-------

Apache License, Version 2.0, ([LICENSE](https://github.com/nikeorever/reparatur/blob/trunk/LICENSE) or [https://www.apache.org/licenses/LICENSE-2.0](https://www.apache.org/licenses/LICENSE-2.0))

